#!/bin/bash

# prepares for the initialization of umedia environment by setting
# the main environments that are required to get the user up running under upipe domain.
# This file is expected to be called by the ~/.bashrc

# checking if upipe root is set
if [ -z "$UPIPE_ROOT" ]; then
  echo "UPIPE_ROOT IS NOT SET, ARE YOU UNDER UPIPE DOMAIN ?" >&2
else

  # non-versioned environments
  export UAPPS_ROOT="$UPIPE_ROOT/apps"
  export ULIBS_ROOT="$UPIPE_ROOT/libs"
  export USYSTEMLIBS_ROOT="$UPIPE_ROOT/systemlibs"
  export UPLUGINS_ROOT="$UPIPE_ROOT/plugins"

  # versioned environments: the versioned variables are initialized
  # automatically during ./init (in case they have not been defined yet).
  # The versioned variables follow the convention: $<DEPENDENCY_NAME>_VERSION :
  # ufacility (versioned)
  export UFACILITY_ROOT="$UPIPE_ROOT/ufacility"

  # ideally it should be defined as part of the OS image deployed to the users,
  # however if not defined then it should fallback to "van"
  if [ -z "$UFACILITY_NAME" ]; then
    export UFACILITY_NAME="van"
  fi

  # uver (versioned)
  export UVER_ROOT="$UPIPE_ROOT/uver"
  export UVER_LOCAL="$HOME/upipe/uver"

  # ucore (versioned)
  export UCORE_ROOT="$UPIPE_ROOT/ucore"
  # ucore local is used to let the user to have custom overrides
  export UCORE_LOCAL="$HOME/upipe/ucore"

  # ulauncher (versioned)
  export ULAUNCHER_ROOT="$UPIPE_ROOT/ulauncher"
fi
